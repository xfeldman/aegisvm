{
  "name": "agent",
  "version": "0.1.0",
  "description": "Messaging-driven LLM agent with Telegram integration",
  "required_secrets": [["OPENAI_API_KEY", "ANTHROPIC_API_KEY"]],
  "usage": "Creates a VM running an LLM agent that receives messages via tether or Telegram and responds with streaming text. The agent has access to MCP tools for spawning child instances, running commands, and managing files.\n\nQuick start (tether only â€” no Telegram):\n1. Check available secrets with secret_list\n2. Start: instance_start with kit=\"agent\", name=\"my-agent\", secrets=[\"OPENAI_API_KEY\"], workspace=\"/path/to/project\"\n3. Send messages via tether_send, read responses via tether_read\n\nWith Telegram gateway:\n1. Set secrets: secret_set OPENAI_API_KEY and TELEGRAM_BOT_TOKEN\n2. Start: instance_start with kit=\"agent\", name=\"my-agent\", secrets=[\"OPENAI_API_KEY\"]\n3. Create gateway config at ~/.aegis/kits/my-agent/gateway.json:\n   {\"telegram\":{\"bot_token_secret\":\"TELEGRAM_BOT_TOKEN\",\"allowed_chats\":[\"*\"]}}\n4. The gateway starts automatically and picks up the config within seconds\n\nThe agent VM pauses when idle (zero CPU) and wakes on new messages. The gateway runs on the host and survives VM pause/stop to enable wake-on-message.\n\nRequired secrets: OPENAI_API_KEY (or ANTHROPIC_API_KEY as alternative)\nOptional secrets: TELEGRAM_BOT_TOKEN (only for Telegram gateway)\nOptional env: AEGIS_SYSTEM_PROMPT (custom system prompt for the LLM)",
  "instance_daemons": ["aegis-gateway"],
  "image": {
    "base": "node:22-alpine",
    "inject": ["aegis-agent"]
  },
  "defaults": {
    "command": ["aegis-agent"],
    "capabilities": {
      "spawn": true,
      "spawn_depth": 2,
      "max_children": 5,
      "allowed_images": ["*"],
      "max_memory_mb": 1024,
      "max_vcpus": 2,
      "max_expose_ports": 5,
      "allowed_secrets": ["*"]
    }
  }
}
